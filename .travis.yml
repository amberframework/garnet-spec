os: osx
language: crystal
language: objective-c
addons:
  chrome: beta
before_install:
  - # start your web application and listen on `localhost`
  - "/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --headless --disable-gpu --remote-debugging-port=9222 http://localhost &"
jdk:
  - oraclejdk8
crystal:
  - latest
install: # Install ChromeDriver (64bits; replace 64 with 32 for 32bits).
  - brew install chromedriver
  - brew install selenium-server-standalone
before_script:
  - brew services start selenium-server-standalone
  - sleep 3
  - shards install
  - crystal spec
env:
  - AMBER_ENV=test
